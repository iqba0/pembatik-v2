window.onload = function() {
    // Cek jika popup belum pernah ditampilkan sebelumnya
    if (!localStorage.getItem('popupDisplayed')) {
      document.getElementById('navbarGuide').style.display = 'flex';
    }
};

// Fungsi untuk menutup popup
function closeNavbarGuide() {
    document.getElementById('navbarGuide').style.display = 'none';
    localStorage.setItem('popupDisplayed', 'true'); // Tandai bahwa popup sudah ditampilkan
}

// Fungsi untuk menampilkan popup
function showPopup() {
    document.getElementById('popupTour').style.display = 'flex';
}

// Fungsi untuk menutup popup
function closePopup() {
    document.getElementById('popupTour').style.display = 'none';
}

  
  
  // Fungsi untuk menangani pencarian dan interaksi dengan navbar
  const toggleSearchFormButton = document.querySelector("#toggle-search-form"),
        searchForm = document.querySelector(".search-form"),
        searchBox = document.querySelector("#search-box"),
        searchIcon = document.querySelector("#search-icon"),
        hamburgerMenu = document.getElementById("hamburger-menu"),
        navbarNav = document.querySelector(".navbar-nav");
  
  function closeSearchForm() {
    if (searchForm.classList.contains("active")) {
      searchForm.classList.remove("active");
      searchForm.style.opacity = "0";
      searchForm.style.pointerEvents = "none";
      setTimeout(() => {
        searchForm.style.visibility = "hidden";
        removeHighlights();
      }, 300);
    }
  }
  
  function performSearch() {
    let e = searchBox.value.toLowerCase().trim();
    if (e === "") {
      removeHighlights();
      return;
    }
    let t = false;
    document.querySelectorAll(".menu-card").forEach(r => {
      let o = r.querySelector("h3");
      if (o && o.textContent.toLowerCase().includes(e)) {
        o.classList.add("highlight");
        if (!t) o.scrollIntoView({ behavior: "smooth", block: "center" });
        t = true;
      } else {
        o.classList.remove("highlight");
      }
    });
    let r = document.getElementById("no-results");
    if (r) r.style.display = t ? "none" : "block";
  }
  
  function removeHighlights() {
    document.querySelectorAll("h3.highlight").forEach(e => {
      e.classList.remove("highlight");
    });
  }
  
  // Event listener untuk toggle search form
  toggleSearchFormButton && searchForm && toggleSearchFormButton.addEventListener("click", e => {
    e.stopPropagation();
    searchForm.classList.toggle("active");
    searchForm.style.visibility = searchForm.classList.contains("active") ? "visible" : "hidden";
    searchForm.style.opacity = searchForm.classList.contains("active") ? "1" : "0";
    searchForm.style.pointerEvents = searchForm.classList.contains("active") ? "auto" : "none";
    if (searchForm.classList.contains("active")) searchBox.focus();
    e.preventDefault();
  });
  
  // Event listener untuk pencarian
  searchIcon.addEventListener("click", function(e) {
    e.stopPropagation();
    performSearch();
  });
  
  searchBox.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      performSearch();
    }
  });
  
  searchBox.addEventListener("input", function(e) {
    if (searchBox.value.trim() === "") removeHighlights();
  });
  
  // Tutup search form saat klik di luar
  document.addEventListener("click", function(e) {
    let t = searchForm && searchForm.contains(e.target),
        r = searchIcon && searchIcon.contains(e.target),
        o = toggleSearchFormButton && toggleSearchFormButton.contains(e.target);
    if (!t && !r && !o) closeSearchForm();
  });
  
  // Toggle menu hamburger
  hamburgerMenu.addEventListener("click", function() {
    navbarNav.classList.toggle("active");
  });
  